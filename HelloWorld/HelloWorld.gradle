apply plugin: 'application'

// -----------------------------------------------------------------------------
// Docker
// -----------------------------------------------------------------------------
buildscript {
    repositories {
		mavenLocal()
		mavenCentral()
	}
    dependencies {
	   classpath libraries.docker
    }
}

apply plugin: 'com.bmuschko.docker-java-application'

mainClassName = 'de.fraunhofer.iosb.helloworld.HelloWorld'

docker {
    javaApplication {
		baseImage = 'app-docker136.hex.tno.nl/pitch/lrc:5.4.0.0-alpine-noslf4j'
        maintainer = 'Reinhard Herzog "reinhard.herzog@iosb.fraunhofer.de"'
        tag = "ivct/helloworld:${helloWorldVersion}"
    }
}

dependencies {
	compileOnly     group: 'io.github.msg134', name: 'IEEE1516e', version: ivctVersion
	compile     libraries.slf4j_api
}

tasks.withType(CreateStartScripts) {
    classpath += files('lib')
doLast {
        def windowsScriptFile = file getWindowsScript()
        def unixScriptFile = file getUnixScript()
        windowsScriptFile.text = windowsScriptFile.text.replace('%APP_HOME%\\lib\\lib', '%APP_HOME%\\lib;%LRC_CLASSPATH%')
        unixScriptFile.text = unixScriptFile.text.replace('$APP_HOME/lib/lib', '$APP_HOME/lib:$LRC_CLASSPATH')
    }
}
